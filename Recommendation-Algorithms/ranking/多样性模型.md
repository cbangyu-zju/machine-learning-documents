# 多样性模型

## 召回侧多样性

* 双塔：
  * 行为序列抽样：
    * 线上使用的时候，抽样用户行为序列，可以增加用户多样性；
  * 在embedding层增加噪声：
    * 用户兴趣越窄，增加越多；
* u2i2i：
  * 种子物品，可以进行抽样，加长用户序列；

## 粗排侧多样性

* 粗排后获得7000个物品，送1000个物品进入精排，其中选粗排后top400作为已选集，然后再使用相似度度量方法来选取多样性高的top600进入精排；

## 精排侧多样性

* 集合多样性计算方法：
  * MMR: 已选中物品集合为S，每次新增物品i，计算MR， MR = a * reward - (1 - a) * max(j属于s) sim(i, j)，
         即计算i和已选中物品集合S中最大相似的作为负向数。滑动窗是对以选中物品进行滑动窗，滑动窗基本为10，应用到精排模型；
  * DPP模型：DPP是行列式的多样性评估方法，因此针对已选的物品集S，新增一个物品i，评估多样性评估值，然后需要评估n个，
    * hulu做了多样性评估优化方法，计算复杂度为n2d + nk2
  * 多样性分可以和规则做结合，结合的时候

## 探索流量

* 人群下精选内容池，加权；
